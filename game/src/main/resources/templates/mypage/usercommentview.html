<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="../css/mypage/usercommentview.css" rel="stylesheet">
<!-- 자바스크립트 -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<style>
h1 {
	text-align: center;
}

table {
	width: 100%;
	margin-top: 5px;
}

th, td {
	border: 1px solid black;
}

.select {
	width: 130px;
	border-radius: 5px;
	padding: 8px;
	font-size: 12px;
	border: 1px solid gray;
}

.search_input {
	width: 190px;
	border-radius: 5px;
	padding: 8px;
	font-size: 13px;
	margin-left: 10px;
	border: 1px solid gray;
	margin-top: 2px;
}

.btn_search {
	color: white;
	background: black;
	border-radius: 5px;
	padding: 6px 15px;
	font-size: 14px;
	border: 1px solid black;
	cursor: pointer;
	margin-left: 5px;
}

.btn_mypage {
	color: white;
	background: black;
	border-radius: 5px;
	padding: 6px 15px;
	font-size: 14px;
	border: 1px solid black;
	cursor: pointer;
	float: right;
}

.btn_delete {
	color: white;
	background: black;
	border-radius: 5px;
	padding: 6px 15px;
	font-size: 14px;
	border: 1px solid black;
	cursor: pointer;
	float: right;
}
</style>
</head>
<body>
	<h1>내 댓글 보기</h1>
	<th:block layout:fragment="search">
                <nav th:replace="mypage/layout/commentSearch :: search"></nav>
            </th:block>
	<form name="deleteCommentForm" id="deleteCommentForm" action="/mypage/commentDelete" method="get">
		<table>
			
			<tbody>
				<tr th:if="${not #lists.isEmpty( commList )}" th:each="row : ${commList}">
					<td><input type="checkbox" name="commNum" th:value="${row.commNum}"></td>
					<td><a th:href="@{/board/freeboard/view(boardNum=${row.boardNum}, memId=${row.memId}, boardType=${row.boardType})}"
						th:text="${row.boardTitle} + '('+ ${row.commCount} +')'"></a></td>
					<td th:text="${row.commContents}"></td>
					<td th:text="${row.commDate}"></td>
					<!-- 첫 번째 파라미터는 '?'로 연결하고, 두 번째부터는 '&'로 연결하는데요, 타임리프는 URI 뒤에 ?대신 괄호를, & 대신 ,(콤마)를 사용 -->
				</tr>
				<tr th:unless="${not #lists.isEmpty( commList )}">
					<td colspan="5">조회된 결과가 없습니다.</td>
				</tr>
			</tbody>
		</table>

		<button type="button" class="btn_delete" onclick="deleteCommentFormCheck()">삭제</button>
		<a href = "./mypagemain">
             <button type="button" class="btn_mypage">마이페이지</button>
        </a>
	</form>

	<th:block layout:fragment="paging">
		<nav th:replace="board/layout/common :: pagination"></nav>
	</th:block>
	<th:block layout:fragment="script">
		<script th:inline="javascript">
			/*<![CDATA[*/

			function movePage(uri, queryString) {
				location.href = uri + queryString;
			}
			
			function searchBoard(form) {
                /*[- 드롭다운이 아닌 메인 검색 키워드로 검색했을 때 -]*/
                    var searchKeyword = document.getElementById("searchKeyword");
                    console.log("키워드값 : "+searchKeyword.value);
                    /*
                    if (searchKeyword.value == "") {
                        alert("키워드를 입력해 주세요.");
                        searchKeyword.focus();
                        return false;
                    }
*/
                    form = document.getElementById("searchForm");
                    form.submit();
            }
			/*]]>*/

		</script>
	</th:block>
</body>
<script>
//삭제댓글 선택 여부 체크
function deleteCommentFormCheck() {
    if ($('input:checkbox[name="commNum"]').is(':checked')) {
    	let result = confirm("정말로 삭제하시겠습니까?");
    	if(result){
    		$("#deleteCommentForm").submit();
    	}
        
    } else {
        alert("삭제할 게시글을 선택해주세요.");
    }
}

$(document).ready(function(){
    var len = $("#searchKeyword").val().length;
    $("#searchKeyword").focus();
    $("#searchKeyword")[0].setSelectionRange(len, len);
});

</script>
</html>